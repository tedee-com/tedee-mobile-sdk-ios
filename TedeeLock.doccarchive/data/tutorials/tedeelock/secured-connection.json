{"hierarchy":{"reference":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents","modules":[{"projects":[{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/requirements","sections":[{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/requirements#Tedee-Pro-or-Tedee-GO","kind":"task"},{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/requirements#Activation-code","kind":"task"},{"kind":"task","reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/requirements#Tedee-account"}]},{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/pak-set-up","sections":[{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/pak-set-up#Personal-Access-Key","kind":"task"}]}],"reference":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Before-You-start"},{"projects":[{"sections":[{"kind":"task","reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/unsecured-connection#Registering-mobile"},{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/unsecured-connection#Serial-number","kind":"task"},{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/unsecured-connection#Unsecured-connection","kind":"task"}],"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/unsecured-connection"},{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/get-lock-data","sections":[{"kind":"task","reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/get-lock-data#Provide-Signed-date-time"},{"kind":"task","reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/get-lock-data#Get-lock-data"}]}],"reference":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Connect-and-get-lock-data"},{"reference":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Add-lock-to-Tedee-account","projects":[{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/add-lock","sections":[{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/add-lock#Add-Lock","kind":"task"}]},{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/register-lock","sections":[{"kind":"task","reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/register-lock#Register-Lock"}]}]},{"projects":[{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/secured-connection","sections":[{"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/secured-connection#Device-Certificate","kind":"task"},{"kind":"task","reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/secured-connection#Secured-connection"}]}],"reference":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Secured-connection-with-lock"},{"reference":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Summary","projects":[{"sections":[{"kind":"task","reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/summary#Summary"}],"reference":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/summary"}]}],"paths":[["doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents","doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/$volume","doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Secured-connection-with-lock"]]},"identifier":{"url":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/secured-connection","interfaceLanguage":"swift"},"sections":[{"chapter":"Secured connection with lock","title":"Secured Connection","estimatedTimeInMinutes":5,"kind":"hero","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Here we will make secured connection to the added and registered lock."}]}]},{"tasks":[{"stepsSection":[{"media":null,"caption":[{"inlineContent":[{"text":"We will pass to this function device id that we get in a response from add lock request.","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"type":"step","code":"secured_connection_01.swift","content":[{"inlineContent":[{"type":"text","text":"Get previously saved mobile id."}],"type":"paragraph"}]},{"code":"secured_connection_02.swift","runtimePreview":"certificate_response.png","type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Prepare and send request.","type":"text"}]}],"media":null,"caption":[]},{"content":[{"inlineContent":[{"type":"text","text":"Extract certificate and return TedeeCertificate."}],"type":"paragraph"}],"code":"secured_connection_03.swift","media":null,"type":"step","runtimePreview":null,"caption":[]}],"title":"Device Certificate","contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"We need to get certificate for this lock from Tedee API","type":"text"}]}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"anchor":"Device-Certificate"},{"title":"Secured connection","contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Now, we can make secured connection to the lock.","type":"text"}]}],"mediaPosition":"trailing","kind":"contentAndMedia"}],"anchor":"Secured-connection","stepsSection":[{"caption":[],"code":"secured_connection_04.swift","content":[{"inlineContent":[{"type":"text","text":"With the certificate, we can make secured connection."}],"type":"paragraph"}],"type":"step","media":null,"runtimePreview":null}]}],"kind":"tasks"},{"abstract":[{"type":"text","text":"Here we will combine all the set up and functions that we prepared previously to achieve add lock flow."}],"title":"Summary","featuredEyebrow":"Tutorial","action":{"type":"reference","overridingTitleInlineContent":[{"text":"Get started","type":"text"}],"identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/summary","isActive":true,"overridingTitle":"Get started"},"kind":"callToAction"}],"metadata":{"category":"How to add Lock","categoryPathComponent":"Tutorial-Table-of-Contents","role":"project","title":"Secured Connection"},"kind":"project","variants":[{"paths":["\/tutorials\/tedeelock\/secured-connection"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"patch":0,"major":0,"minor":3},"references":{"doc://TedeeLock/tutorials/TedeeLock/add-lock":{"kind":"project","estimatedTime":"5min","url":"\/tutorials\/tedeelock\/add-lock","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/add-lock","abstract":[{"type":"text","text":"Here wi will add the lock to Tedee account via Tedee API"}],"type":"topic","title":"Add Lock","role":"project"},"doc://TedeeLock/tutorials/TedeeLock/register-lock":{"estimatedTime":"2min","abstract":[{"type":"text","text":"Here we will register the lock, this is required to made secured connection later."}],"kind":"project","role":"project","url":"\/tutorials\/tedeelock\/register-lock","type":"topic","title":"Register Lock","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/register-lock"},"doc://TedeeLock/tutorials/TedeeLock/add-lock#Add-Lock":{"type":"section","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/add-lock#Add-Lock","abstract":[{"type":"text","text":"Here wi will add the lock to Tedee account via Tedee API"}],"role":"pseudoSymbol","title":"Add Lock","kind":"section","url":"\/tutorials\/tedeelock\/add-lock#Add-Lock"},"certificate_response.png":{"alt":"Certificate response","type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/certificate_response.png"}],"identifier":"certificate_response.png"},"secured_connection_03.swift":{"fileType":"swift","syntax":"swift","fileName":"addLock.swift","content":["import Foundation","import TedeeLock","","class AddLock {","    func getCertificate(deviceId: Int) async -> TedeeCertificate {","        let mobileId = UserDefaults.standard.string(forKey: \"TedeeMobileId\")!","        ","        let requestURL = URL(string: \"https:\/\/api.tedee.com\/api\/v1.32\/my\/devicecertificate\/getformobile?MobileId=\\(mobileId)&DeviceId=\\(deviceId)\")!","        var request = URLRequest(url: requestURL)","        request.httpMethod = \"GET\"","        request.addValue(\"application\/json\", forHTTPHeaderField: \"accept\")","        request.addValue(\"PersonalKey \\(pak)\", forHTTPHeaderField: \"Authorization\")","        ","        let response = try! await URLSession.shared.data(for: request)","        ","        let responseDictionary = try! JSONSerialization.jsonObject(with: response.0) as! [String: Any]","        let result = responseDictionary[\"result\"] as! [String: String]","        ","        let dF = DateFormatter()","        dF.dateFormat = \"yyyy-MM-dd'T'HH:mm:ss.SSSSSSS'Z'\"","        dF.locale = Locale(identifier: \"en_US_POSIX\")","        dF.timeZone = TimeZone(abbreviation: \"UTC\")","        let expirationDate = dF.date(from: result[\"expirationDate\"]!)","        ","        return try! TedeeCertificate(certificate: result[\"certificate\"]!,","                                     expirationDate: expirationDate!,","                                     devicePublicKey: result[\"devicePublicKey\"]!,","                                     mobilePublicKey: result[\"mobilePublicKey\"]!)","    }","}"],"type":"file","identifier":"secured_connection_03.swift","highlights":[{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28}]},"doc://TedeeLock/tutorials/TedeeLock/register-lock#Register-Lock":{"abstract":[{"type":"text","text":"Here we will register the lock, this is required to made secured connection later."}],"url":"\/tutorials\/tedeelock\/register-lock#Register-Lock","kind":"section","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/register-lock#Register-Lock","role":"pseudoSymbol","type":"section","title":"Register Lock"},"secured_connection_02.swift":{"fileType":"swift","syntax":"swift","fileName":"addLock.swift","type":"file","content":["import Foundation","import TedeeLock","","class AddLock {","    func getCertificate(deviceId: Int) async -> TedeeCertificate {","        let mobileId = UserDefaults.standard.string(forKey: \"TedeeMobileId\")!","        ","        let requestURL = URL(string: \"https:\/\/api.tedee.com\/api\/v1.32\/my\/devicecertificate\/getformobile?MobileId=\\(mobileId)&DeviceId=\\(deviceId)\")!","        var request = URLRequest(url: requestURL)","        request.httpMethod = \"GET\"","        request.addValue(\"application\/json\", forHTTPHeaderField: \"accept\")","        request.addValue(\"PersonalKey \\(pak)\", forHTTPHeaderField: \"Authorization\")","        ","        let response = try! await URLSession.shared.data(for: request)","    }","}"],"identifier":"secured_connection_02.swift","highlights":[{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14}]},"doc://TedeeLock/tutorials/TedeeLock/pak-set-up":{"type":"topic","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/pak-set-up","abstract":[{"type":"text","text":"Here we will configure Personal Access Key in "},{"isActive":true,"identifier":"https:\/\/portal.tedee.com","type":"reference"},{"type":"text","text":"."}],"role":"project","title":"Personal Access Key","estimatedTime":"5min","kind":"project","url":"\/tutorials\/tedeelock\/pak-set-up"},"doc://TedeeLock/tutorials/Tutorial-Table-of-Contents":{"abstract":[{"type":"text","text":"This tutorial will show you basic steps that are needed in order to add lock to Tedee account, register the lock device and securely connect to it."}],"kind":"overview","role":"overview","url":"\/tutorials\/tutorial-table-of-contents","type":"topic","title":"How to add Lock","identifier":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents"},"doc://TedeeLock/tutorials/TedeeLock/summary#Summary":{"abstract":[{"type":"text","text":"Here we will combine all the set up and functions that we prepared previously to achieve add lock flow."}],"kind":"section","role":"pseudoSymbol","url":"\/tutorials\/tedeelock\/summary#Summary","type":"section","title":"Summary","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/summary#Summary"},"doc://TedeeLock/tutorials/TedeeLock/unsecured-connection#Unsecured-connection":{"abstract":[{"type":"text","text":"Here we will register mobile in Tedee API, we will get serial number of the lock from activation code and then we will make unsecured connection to the lock that we want to add."}],"kind":"section","role":"pseudoSymbol","url":"\/tutorials\/tedeelock\/unsecured-connection#Unsecured-connection","type":"section","title":"Unsecured connection","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/unsecured-connection#Unsecured-connection"},"doc://TedeeLock/tutorials/TedeeLock/requirements":{"abstract":[{"type":"text","text":"Here are all the requirements that you need to prepare to be able to complete this tutorial."}],"identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/requirements","url":"\/tutorials\/tedeelock\/requirements","estimatedTime":"5min","type":"topic","kind":"project","title":"Requirements","role":"project"},"secured_connection_01.swift":{"highlights":[],"fileName":"addLock.swift","fileType":"swift","identifier":"secured_connection_01.swift","type":"file","syntax":"swift","content":["import Foundation","import TedeeLock","","class AddLock {","    func getCertificate(deviceId: Int) async -> TedeeCertificate {","        let mobileId = UserDefaults.standard.string(forKey: \"TedeeMobileId\")!","    }","}"]},"doc://TedeeLock/tutorials/Tutorial-Table-of-Contents/Connect-and-get-lock-data":{"title":"Connect and get lock data","abstract":[],"identifier":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Connect-and-get-lock-data","url":"\/tutorials\/tutorial-table-of-contents\/connect-and-get-lock-data","kind":"article","role":"article","type":"topic"},"doc://TedeeLock/tutorials/TedeeLock/get-lock-data#Get-lock-data":{"title":"Get lock data","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/get-lock-data#Get-lock-data","abstract":[{"type":"text","text":"Here we will get all necessary data from lock, that are required to add lock to your account."}],"url":"\/tutorials\/tedeelock\/get-lock-data#Get-lock-data","kind":"section","role":"pseudoSymbol","type":"section"},"doc://TedeeLock/tutorials/TedeeLock/requirements#Tedee-Pro-or-Tedee-GO":{"title":"Tedee Pro or Tedee GO","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/requirements#Tedee-Pro-or-Tedee-GO","url":"\/tutorials\/tedeelock\/requirements#Tedee-Pro-or-Tedee-GO","role":"pseudoSymbol","abstract":[{"type":"text","text":"Here are all the requirements that you need to prepare to be able to complete this tutorial."}],"type":"section","kind":"section"},"doc://TedeeLock/tutorials/Tutorial-Table-of-Contents/Before-You-start":{"title":"Before You start","abstract":[],"identifier":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Before-You-start","url":"\/tutorials\/tutorial-table-of-contents\/before-you-start","kind":"article","role":"article","type":"topic"},"secured_connection_04.swift":{"highlights":[],"fileName":"addLock.swift","fileType":"swift","type":"file","identifier":"secured_connection_04.swift","syntax":"swift","content":["import Foundation","import TedeeLock","","class AddLock {","    func securedConnection(serialNumber: TedeeSerialNumber, certificate: TedeeCertificate) async {","        try! await TedeeLockManager.shared.connect(serialNumber, certificate: certificate)","    }","}"]},"doc://TedeeLock/tutorials/TedeeLock/unsecured-connection#Registering-mobile":{"identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/unsecured-connection#Registering-mobile","title":"Registering mobile","kind":"section","type":"section","url":"\/tutorials\/tedeelock\/unsecured-connection#Registering-mobile","abstract":[{"type":"text","text":"Here we will register mobile in Tedee API, we will get serial number of the lock from activation code and then we will make unsecured connection to the lock that we want to add."}],"role":"pseudoSymbol"},"doc://TedeeLock/tutorials/TedeeLock/requirements#Tedee-account":{"url":"\/tutorials\/tedeelock\/requirements#Tedee-account","type":"section","role":"pseudoSymbol","abstract":[{"type":"text","text":"Here are all the requirements that you need to prepare to be able to complete this tutorial."}],"identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/requirements#Tedee-account","title":"Tedee account","kind":"section"},"doc://TedeeLock/tutorials/TedeeLock/get-lock-data#Provide-Signed-date-time":{"abstract":[{"type":"text","text":"Here we will get all necessary data from lock, that are required to add lock to your account."}],"kind":"section","role":"pseudoSymbol","url":"\/tutorials\/tedeelock\/get-lock-data#Provide-Signed-date-time","type":"section","title":"Provide Signed date time","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/get-lock-data#Provide-Signed-date-time"},"doc://TedeeLock/tutorials/TedeeLock/summary":{"url":"\/tutorials\/tedeelock\/summary","type":"topic","title":"Summary","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/summary","estimatedTime":"3min","role":"project","kind":"project","abstract":[{"type":"text","text":"Here we will combine all the set up and functions that we prepared previously to achieve add lock flow."}]},"doc://TedeeLock/tutorials/TedeeLock/get-lock-data":{"abstract":[{"type":"text","text":"Here we will get all necessary data from lock, that are required to add lock to your account."}],"url":"\/tutorials\/tedeelock\/get-lock-data","estimatedTime":"5min","kind":"project","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/get-lock-data","role":"project","type":"topic","title":"Get Lock data"},"doc://TedeeLock/tutorials/TedeeLock/pak-set-up#Personal-Access-Key":{"title":"Personal Access Key","abstract":[{"type":"text","text":"Here we will configure Personal Access Key in "},{"type":"reference","identifier":"https:\/\/portal.tedee.com","isActive":true},{"type":"text","text":"."}],"identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/pak-set-up#Personal-Access-Key","url":"\/tutorials\/tedeelock\/pak-set-up#Personal-Access-Key","kind":"section","role":"pseudoSymbol","type":"section"},"doc://TedeeLock/tutorials/Tutorial-Table-of-Contents/Add-lock-to-Tedee-account":{"title":"Add lock to Tedee account","identifier":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Add-lock-to-Tedee-account","url":"\/tutorials\/tutorial-table-of-contents\/add-lock-to-tedee-account","role":"article","abstract":[],"type":"topic","kind":"article"},"doc://TedeeLock/tutorials/TedeeLock/unsecured-connection":{"title":"Unsecured Connection","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/unsecured-connection","abstract":[{"type":"text","text":"Here we will register mobile in Tedee API, we will get serial number of the lock from activation code and then we will make unsecured connection to the lock that we want to add."}],"url":"\/tutorials\/tedeelock\/unsecured-connection","kind":"project","role":"project","type":"topic","estimatedTime":"10min"},"doc://TedeeLock/tutorials/TedeeLock/unsecured-connection#Serial-number":{"title":"Serial number ","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/unsecured-connection#Serial-number","abstract":[{"type":"text","text":"Here we will register mobile in Tedee API, we will get serial number of the lock from activation code and then we will make unsecured connection to the lock that we want to add."}],"url":"\/tutorials\/tedeelock\/unsecured-connection#Serial-number","kind":"section","role":"pseudoSymbol","type":"section"},"doc://TedeeLock/tutorials/Tutorial-Table-of-Contents/Summary":{"title":"Summary","identifier":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Summary","url":"\/tutorials\/tutorial-table-of-contents\/summary","role":"article","abstract":[],"kind":"article","type":"topic"},"doc://TedeeLock/tutorials/TedeeLock/secured-connection#Device-Certificate":{"kind":"section","url":"\/tutorials\/tedeelock\/secured-connection#Device-Certificate","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/secured-connection#Device-Certificate","title":"Device Certificate","type":"section","abstract":[{"type":"text","text":"Here we will make secured connection to the added and registered lock."}],"role":"pseudoSymbol"},"doc://TedeeLock/tutorials/TedeeLock/secured-connection":{"abstract":[{"type":"text","text":"Here we will make secured connection to the added and registered lock."}],"url":"\/tutorials\/tedeelock\/secured-connection","estimatedTime":"5min","kind":"project","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/secured-connection","role":"project","type":"topic","title":"Secured Connection"},"doc://TedeeLock/tutorials/TedeeLock/secured-connection#Secured-connection":{"abstract":[{"type":"text","text":"Here we will make secured connection to the added and registered lock."}],"kind":"section","role":"pseudoSymbol","url":"\/tutorials\/tedeelock\/secured-connection#Secured-connection","type":"section","title":"Secured connection","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/secured-connection#Secured-connection"},"doc://TedeeLock/tutorials/TedeeLock/requirements#Activation-code":{"abstract":[{"type":"text","text":"Here are all the requirements that you need to prepare to be able to complete this tutorial."}],"kind":"section","role":"pseudoSymbol","url":"\/tutorials\/tedeelock\/requirements#Activation-code","type":"section","title":"Activation code","identifier":"doc:\/\/TedeeLock\/tutorials\/TedeeLock\/requirements#Activation-code"},"doc://TedeeLock/tutorials/Tutorial-Table-of-Contents/Secured-connection-with-lock":{"type":"topic","url":"\/tutorials\/tutorial-table-of-contents\/secured-connection-with-lock","role":"article","abstract":[],"identifier":"doc:\/\/TedeeLock\/tutorials\/Tutorial-Table-of-Contents\/Secured-connection-with-lock","title":"Secured connection with lock","kind":"article"},"https://portal.tedee.com":{"url":"https:\/\/portal.tedee.com","title":"Tedee Portal","identifier":"https:\/\/portal.tedee.com","type":"link","titleInlineContent":[{"type":"text","text":"Tedee Portal"}]}}}